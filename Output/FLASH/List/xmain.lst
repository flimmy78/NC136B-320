###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.1.10123/W32 for ARM       28/Dec/2017  08:42:43
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  F:\iar\NC136B-320 IC卡模块\Software\APP\xmain.c
#    Command line =  
#        "F:\iar\NC136B-320 IC卡模块\Software\APP\xmain.c" -D RELEASE -lCN
#        "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Output\FLASH\List\"
#        --diag_suppress Pa050 -o "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Output\FLASH\Obj\"
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M3 -e --fpu=None --dlib_config "C:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.3\arm\INC\c\DLib_Config_Normal.h" -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\" -I
#        "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\uCOS-III\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\BSP\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\BSP\IAR\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\BSP\OS\uCOS-III\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CSP\MCU\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CSP\MCU\NXP\LPC17xx\LPC1768\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CSP\MCU\NXP\LPC17xx\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uCOS-III\Ports\ARM-Cortex-M3\Generic\IAR\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uCOS-III\Ports\ARM-Cortex-M3\CSP\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uCOS-III\Source\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-LIB\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CPU\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-CPU\ARM-Cortex-M3\IAR\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-MB\Source\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-MB\Cfg\Template\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\uC-MB\Os\uCOS-III\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\OSAL\OS\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\OSAL\Ports\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\User\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\Iap\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\Protocol\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\Tasks\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\APP\AES\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\BSP\OS\OSAL\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\CSB\include\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\BSP\Driver\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\APP\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\APP\MX25L1602Drv\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\APP\OCM800600T80\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\User\BSP\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\CardOperations\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\DataDeal\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\Driver\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\EquipmentOperations\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\Global\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\MastConTask\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\SlaveConTask\"
#        -I "F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Application\Library\SpeedTest\"
#        -On --use_c++_inline
#    List file    =  
#        F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Output\FLASH\List\xmain.lst
#    Object file  =  
#        F:\iar\NC136B-320
#        IC卡模块\Software\EvalBoards\NXP\LPC1768-SK\uCOS-III\IAR\..\..\..\..\..\..\Output\FLASH\Obj\xmain.o
#
###############################################################################

F:\iar\NC136B-320 IC卡模块\Software\APP\xmain.c
      1          /*******************************************************************************
      2           *   Filename:      app.c
      3           *   Revised:       $Date: 2013-06-30$
      4           *   Revision:      $
      5           *	 Writer:		Wuming Shen.
      6           *
      7           *   Description:
      8           *   Notes:
      9           *					QQ:276193028
     10           *     				E-mail:shenchangwei945@163.com
     11           *
     12           *   All copyrights reserved to Wuming Shen.
     13           *
     14           *******************************************************************************/
     15          
     16          /*******************************************************************************
     17           * INCLUDES
     18           */
     19          #define  SNL_APP_SOURCE
     20          #include <app.h>
     21          #include <app_ctrl.h>
     22          
     23          //#include <iap.h>
     24          
     25          #ifdef VSC_INCLUDE_SOURCE_FILE_NAMES
     26          const  CPU_CHAR  *main__c = "$Id: $";
     27          #endif
     28          
     29          
     30          void    TaskInitStore(void);
     31          osalEvt  TaskStoreEvtProcess(INT8U task_id, osalEvt task_event);
     32          
     33          void    TaskInitCalc(void);
     34          osalEvt  TaskCalcEvtProcess(INT8U task_id, osalEvt task_event);
     35          
     36          void    TaskInitSpeed(void);
     37          osalEvt  TaskSpeedEvtProcess(INT8U task_id, osalEvt task_event);
     38          
     39          void     TaskInitLed(void);
     40          osalEvt  TaskLedEvtProcess(INT8U task_id, osalEvt task_event);
     41          
     42          uint8 	FRAM_StoreRunPara(stcRunPara  *sRunPara);
     43          void	InitFlashIO(void);
     44          void	GPIO_Fram_Init(void);
     45          uint8 FRAM_ReadRecNumMgr(StrRecNumMgr  *SRecNumMgr);
     46          uint8 FRAM_ReadProductInfo(StrProductInfo  *sProductInfo);
     47          void  App_TaskCardCreate(void);
     48          uint8 FRAM_ReadRunPara(stcRunPara  *sRunPara);
     49          
     50          
     51          //void    TaskInitStore(void);
     52          //osalEvt  TaskStoreEvtProcess(INT8U task_id, osalEvt task_event);
     53          /*******************************************************************************
     54           * CONSTANTS
     55           */
     56          #define CYCLE_TIME_TICKS            (OS_TICKS_PER_SEC * 2)
     57          
     58          /*******************************************************************************
     59           * MACROS
     60           */
     61          
     62          /*******************************************************************************
     63           * TYPEDEFS
     64           */
     65          
     66          /*******************************************************************************
     67           * LOCAL VARIABLES
     68           */
     69          
     70          /*******************************************************************************
     71           * GLOBAL VARIABLES
     72           */
     73          /***********************************************
     74          * 描述： 创建标志组
     75          */

   \                                 In section .bss, align 4
     76          OS_FLAG_GRP         WdtFlagGRP;                     //看门狗标志组
   \                     WdtFlagGRP:
   \   00000000                      DS8 40

   \                                 In section .bss, align 4
     77          OS_FLAGS            WdtFlags;
   \                     WdtFlags:
   \   00000000                      DS8 4
     78          

   \                                 In section .bss, align 4
     79          stcSysCtrl          Ctrl;
   \                     Ctrl:
   \   00000000                      DS8 764
     80          /*******************************************************************************
     81           * LOCAL FUNCTIONS
     82           *
     83           * 返回类型         函数名称                入口参数
     84           */
     85          
     86          /*******************************************************************************
     87           * GLOBAL FUNCTIONS
     88           */
     89          
     90          /*******************************************************************************
     91           * EXTERN VARIABLES
     92           */
     93          
     94          /*******************************************************************************
     95           * EXTERN FUNCTIONS
     96           */
     97          
     98          /*******************************************************************************
     99           * 名    称： App_Main
    100           * 功    能： 系统初开始前调用此函数
    101           * 入口参数： 无
    102           * 出口参数： 无
    103           * 作　 　者： 无名沈
    104           * 创建日期： 2014-08-08
    105           * 修    改：
    106           * 修改日期：
    107           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    108           void App_Main(void)
    109           { 
    110              //NVIC_SetVTOR(0x10000);
    111              /***********************************************
    112              * 描述： Disable all interrupts.
    113              */
    114              //BSP_IntDisAll();
    115              /***********************************************
    116              * 描述： 重新设置应用程序中断向量表，如果没有BOOTLOADER
    117              *        NVIC_VectTab_FLASH_OFFSET = 0
    118              */
    119          //#if defined     (IMAGE_A)
    120          //    /***********************************************
    121          //    * 描述： 程序A
    122          //    */
    123          //    NVIC_SetVectorTable(NVIC_VectTab_FLASH, FLASH_APP_ADDR_A-FLASH_BOOT_ADDR);
    124          //    IAP_SetStatus(IAP_STS_SUCCEED); 
    125          //#elif defined   (IMAGE_B)
    126          //    /***********************************************
    127          //    * 描述： 程序B
    128          //    */
    129          //    NVIC_SetVectorTable(NVIC_VectTab_FLASH, FLASH_APP_ADDR_B-FLASH_BOOT_ADDR);
    130          //    IAP_SetStatus(IAP_STS_SUCCEED); 
    131          //#else
    132          //    /***********************************************
    133          //    * 描述： 程序
    134          //    */
    135          //    NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0X0000);
    136          //#endif
    137           
    138           }
   \                     App_Main: (+1)
   \   00000000   0x4770             BX       LR               ;; return
    139          
    140          /*******************************************************************************
    141           * 名    称： App_InitStartHook
    142           * 功    能： 系统初始化开始前调用此函数
    143           * 入口参数： 无
    144           * 出口参数： 无
    145           * 作　 　者： 无名沈
    146           * 创建日期： 2014-08-08
    147           * 修    改：
    148           * 修改日期：
    149           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    150           void App_InitStartHook(void)
    151           {
    152           
    153           }
   \                     App_InitStartHook: (+1)
   \   00000000   0x4770             BX       LR               ;; return
    154           
    155          /*******************************************************************************
    156           * 名    称： App_InitEndHook
    157           * 功    能： 系统初始化结速后调用此函数
    158           * 入口参数： 无
    159           * 出口参数： 无
    160           * 作　 　者： 无名沈
    161           * 创建日期： 2014-08-08
    162           * 修    改：
    163           * 修改日期：
    164           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    165           void App_InitEndHook(void)
    166           {
    167           
    168           }
   \                     App_InitEndHook: (+1)
   \   00000000   0x4770             BX       LR               ;; return
    169           
    170           /*******************************************************************************
    171           * 名    称： OS_TaskCreateHook
    172           * 功    能： OS创建任务回调函数
    173           * 入口参数： 无
    174           * 出口参数： 无
    175           * 作  　者： 无名沈
    176           * 创建日期： 2014-08-08
    177           * 修    改：
    178           * 修改日期：
    179           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    180           void OS_TaskCreateHook(void)
    181           {     
   \                     OS_TaskCreateHook: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    182             App_TaskCommCreate();
   \   00000002   0x.... 0x....      BL       App_TaskCommCreate
    183             App_TaskCardCreate();
   \   00000006   0x.... 0x....      BL       App_TaskCardCreate
    184              //App_TaskMaterCreate();
    185              //App_TaskDtuCreate();
    186              //App_TaskKeyCreate();
    187              //App_TaskBeepCreate();
    188           }
   \   0000000A   0xBD01             POP      {R0,PC}          ;; return
    189           
    190           /*******************************************************************************
    191           * 名    称： OSAL_TaskCreateHook
    192           * 功    能： OSAL创建任务回调函数
    193           * 入口参数： 无
    194           * 出口参数： 无
    195           * 作　 　者： 无名沈
    196           * 创建日期： 2014-08-08
    197           * 修    改：
    198           * 修改日期：
    199           *******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    200           void OSAL_TaskCreateHook(void)
    201           {
   \                     OSAL_TaskCreateHook: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    202              //osal_add_Task(TaskInitKey,                      // 任务初始化函数指针
    203              //              TaskKeyEvtProcess,                // 任务事件处理函数指针
    204              //              OS_TASK_PRO_KEY,                  // 任务优先级
    205              //              OS_TASK_ID_KEY);                  // 任务ID
    206              
    207              //osal_add_Task(TaskInitCtrl,                     // 任务初始化函数指针
    208              //              TaskCtrlEvtProcess,               // 任务事件处理函数指针
    209              //              OS_TASK_PRO_CTRL,                 // 任务优先级
    210              //              OS_TASK_ID_CTRL);                 // 任务ID
    211                 
    212              osal_add_Task(TaskInitTmr,                      // 任务初始化函数指针
    213                            TaskTmrEvtProcess,                // 任务事件处理函数指针
    214                            OS_TASK_PRO_TMR,                  // 任务优先级
    215                            OS_TASK_ID_TMR);                  // 任务ID
   \   00000002   0x2301             MOVS     R3,#+1
   \   00000004   0x2208             MOVS     R2,#+8
   \   00000006   0x....             LDR.N    R1,??DataTable1
   \   00000008   0x....             LDR.N    R0,??DataTable1_1
   \   0000000A   0x.... 0x....      BL       osal_add_Task
    216          /*        
    217          
    218              osal_add_Task(TaskInitDisp,                     // 任务初始化函数指针
    219                            TaskDispEvtProcess,               // 任务事件处理函数指针
    220                            OS_TASK_PRO_DISP,                 // 任务优先级
    221                            OS_TASK_ID_DISP);                 // 任务ID 
    222              
    223              osal_add_Task(TaskInitStore,                    // 任务初始化函数指针
    224                            TaskStoreEvtProcess,              // 任务事件处理函数指针
    225                            OS_TASK_PRO_STORE,                // 任务优先级
    226                            OS_TASK_ID_STORE);                // 任务ID
    227              
    228              osal_add_Task(TaskInitCalc,                    // 任务初始化函数指针
    229                            TaskCalcEvtProcess,              // 任务事件处理函数指针
    230                            OS_TASK_PRO_CALC,                // 任务优先级
    231                            OS_TASK_ID_CALC);                // 任务ID   
    232             
    233              osal_add_Task(TaskInitSpeed,                    // 任务初始化函数指针
    234                            TaskSpeedEvtProcess,              // 任务事件处理函数指针
    235                            OS_TASK_PRO_SPEED,                // 任务优先级
    236                            OS_TASK_ID_SPEED);                // 任务ID       
    237          */     
    238              osal_add_Task(TaskInitLed,                      // 任务初始化函数指针
    239                            TaskLedEvtProcess,                // 任务事件处理函数指针
    240                            OS_TASK_PRO_LED,                  // 任务优先级
    241                            OS_TASK_ID_LED);                  // 任务ID    
   \   0000000E   0x2306             MOVS     R3,#+6
   \   00000010   0x2203             MOVS     R2,#+3
   \   00000012   0x....             LDR.N    R1,??DataTable1_2
   \   00000014   0x....             LDR.N    R0,??DataTable1_3
   \   00000016   0x.... 0x....      BL       osal_add_Task
    242           }
   \   0000001A   0xBD01             POP      {R0,PC}          ;; return
    243            

   \                                 In section .text, align 2, keep-with-next
    244          void app_init_sctrl(void)
    245          {
   \                     app_init_sctrl: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    246              extern uint8_t BSP_FlashOsInit(void);
    247              //初始化fram 
    248              GPIO_Fram_Init();
   \   00000002   0x.... 0x....      BL       GPIO_Fram_Init
    249              BSP_FramOsInit(); 
   \   00000006   0x.... 0x....      BL       BSP_FramOsInit
    250              WdtReset();
   \   0000000A   0x.... 0x....      BL       BSP_WDT_Rst
    251              //初始化flash
    252              InitFlashIO();
   \   0000000E   0x.... 0x....      BL       InitFlashIO
    253              BSP_FlashOsInit(); 
   \   00000012   0x.... 0x....      BL       BSP_FlashOsInit
    254              WdtReset();
   \   00000016   0x.... 0x....      BL       BSP_WDT_Rst
    255              
    256              Ctrl.Password      =   0;
   \   0000001A   0x2000             MOVS     R0,#+0
   \   0000001C   0x....             LDR.N    R1,??DataTable1_4
   \   0000001E   0x8008             STRH     R0,[R1, #+0]
    257              Ctrl.SoftWareID    =   1705;       //年月，版本
   \   00000020   0xF240 0x60A9      MOVW     R0,#+1705
   \   00000024   0x....             LDR.N    R1,??DataTable1_4
   \   00000026   0x8048             STRH     R0,[R1, #+2]
    258              
    259              //开始标示    //存储时间间隔
    260              Ctrl.sRunPara.StartFlg = 1;  
   \   00000028   0x2001             MOVS     R0,#+1
   \   0000002A   0x....             LDR.N    R1,??DataTable1_4
   \   0000002C   0xF881 0x00AE      STRB     R0,[R1, #+174]
    261              Ctrl.sRunPara.SysSta   = 0;        
   \   00000030   0x2000             MOVS     R0,#+0
   \   00000032   0x....             LDR.N    R1,??DataTable1_4
   \   00000034   0xF881 0x00AF      STRB     R0,[R1, #+175]
    262              
    263             	FRAM_StoreRunPara((stcRunPara *) &Ctrl.sRunPara);
   \   00000038   0x....             LDR.N    R0,??DataTable1_5
   \   0000003A   0x.... 0x....      BL       FRAM_StoreRunPara
    264              
    265              Ctrl.sRunPara.plugcard = 0;        //没插卡      
   \   0000003E   0x....             LDR.N    R0,??DataTable1_4
   \   00000040   0xF890 0x00AD      LDRB     R0,[R0, #+173]
   \   00000044   0xF010 0x00FE      ANDS     R0,R0,#0xFE
   \   00000048   0x....             LDR.N    R1,??DataTable1_4
   \   0000004A   0xF881 0x00AD      STRB     R0,[R1, #+173]
    266              Ctrl.sRunPara.StoreTime= 60;       
   \   0000004E   0x203C             MOVS     R0,#+60
   \   00000050   0x....             LDR.N    R1,??DataTable1_4
   \   00000052   0xF881 0x00AC      STRB     R0,[R1, #+172]
    267              
    268              //IC模块 数据 初始化    
    269              Ctrl.Otr.ConnCtrl[0].ConnFlg   = 1;
   \   00000056   0x2001             MOVS     R0,#+1
   \   00000058   0x....             LDR.N    R1,??DataTable1_4
   \   0000005A   0xF881 0x0208      STRB     R0,[R1, #+520]
    270              Ctrl.Otr.ConnCtrl[0].ErrFlg    = 0;
   \   0000005E   0x2000             MOVS     R0,#+0
   \   00000060   0x....             LDR.N    R1,??DataTable1_4
   \   00000062   0xF881 0x020B      STRB     R0,[R1, #+523]
    271              Ctrl.Otr.ConnCtrl[0].MasterAddr= 0x80;
   \   00000066   0x2080             MOVS     R0,#+128
   \   00000068   0x....             LDR.N    R1,??DataTable1_4
   \   0000006A   0xF881 0x020D      STRB     R0,[R1, #+525]
    272              Ctrl.Otr.ConnCtrl[0].SlaveAddr = SLAVE_ADDR_OTR;
   \   0000006E   0x20C1             MOVS     R0,#+193
   \   00000070   0x....             LDR.N    R1,??DataTable1_4
   \   00000072   0xF881 0x020C      STRB     R0,[R1, #+524]
    273              Ctrl.Otr.ConnCtrl[0].RecvEndFlg= 0;
   \   00000076   0x2000             MOVS     R0,#+0
   \   00000078   0x....             LDR.N    R1,??DataTable1_4
   \   0000007A   0xF881 0x0209      STRB     R0,[R1, #+521]
    274              Ctrl.Otr.ConnCtrl[0].SendFlg   = 0;
   \   0000007E   0x2000             MOVS     R0,#+0
   \   00000080   0x....             LDR.N    R1,??DataTable1_4
   \   00000082   0xF881 0x020F      STRB     R0,[R1, #+527]
    275              Ctrl.Otr.ConnCtrl[0].SendFramNum=1;
   \   00000086   0x2001             MOVS     R0,#+1
   \   00000088   0x....             LDR.N    R1,??DataTable1_4
   \   0000008A   0xF881 0x020E      STRB     R0,[R1, #+526]
    276              Ctrl.Otr.ConnCtrl[0].TimeOut   = 10;       
   \   0000008E   0x200A             MOVS     R0,#+10
   \   00000090   0x....             LDR.N    R1,??DataTable1_4
   \   00000092   0xF881 0x020A      STRB     R0,[R1, #+522]
    277              
    278              //IC模块 参数 初始化    
    279              Ctrl.Otr.ConnCtrl[1].ConnFlg   = 1;
   \   00000096   0x2001             MOVS     R0,#+1
   \   00000098   0x....             LDR.N    R1,??DataTable1_4
   \   0000009A   0xF881 0x0210      STRB     R0,[R1, #+528]
    280              Ctrl.Otr.ConnCtrl[1].ErrFlg    = 0;
   \   0000009E   0x2000             MOVS     R0,#+0
   \   000000A0   0x....             LDR.N    R1,??DataTable1_4
   \   000000A2   0xF881 0x0213      STRB     R0,[R1, #+531]
    281              Ctrl.Otr.ConnCtrl[1].MasterAddr= 0x80;
   \   000000A6   0x2080             MOVS     R0,#+128
   \   000000A8   0x....             LDR.N    R1,??DataTable1_4
   \   000000AA   0xF881 0x0215      STRB     R0,[R1, #+533]
    282              Ctrl.Otr.ConnCtrl[1].SlaveAddr = SLAVE_ADDR_SET;
   \   000000AE   0x20C2             MOVS     R0,#+194
   \   000000B0   0x....             LDR.N    R1,??DataTable1_4
   \   000000B2   0xF881 0x0214      STRB     R0,[R1, #+532]
    283              Ctrl.Otr.ConnCtrl[1].RecvEndFlg= 0;
   \   000000B6   0x2000             MOVS     R0,#+0
   \   000000B8   0x....             LDR.N    R1,??DataTable1_4
   \   000000BA   0xF881 0x0211      STRB     R0,[R1, #+529]
    284              Ctrl.Otr.ConnCtrl[1].SendFlg   = 0;
   \   000000BE   0x2000             MOVS     R0,#+0
   \   000000C0   0x....             LDR.N    R1,??DataTable1_4
   \   000000C2   0xF881 0x0217      STRB     R0,[R1, #+535]
    285              Ctrl.Otr.ConnCtrl[1].SendFramNum=1;
   \   000000C6   0x2001             MOVS     R0,#+1
   \   000000C8   0x....             LDR.N    R1,??DataTable1_4
   \   000000CA   0xF881 0x0216      STRB     R0,[R1, #+534]
    286              Ctrl.Otr.ConnCtrl[1].TimeOut   = 10; 
   \   000000CE   0x200A             MOVS     R0,#+10
   \   000000D0   0x....             LDR.N    R1,??DataTable1_4
   \   000000D2   0xF881 0x0212      STRB     R0,[R1, #+530]
    287              
    288              WdtReset();
   \   000000D6   0x.... 0x....      BL       BSP_WDT_Rst
    289              //读sCtrl 
    290              FRAM_ReadRecNumMgr((StrRecNumMgr  *)&Ctrl.sRecNumMgr);         //读记录号
   \   000000DA   0x....             LDR.N    R0,??DataTable1_6
   \   000000DC   0x.... 0x....      BL       FRAM_ReadRecNumMgr
    291              FRAM_ReadProductInfo((StrProductInfo  *)&Ctrl.sProductInfo);   //读产品编号
   \   000000E0   0x....             LDR.N    R0,??DataTable1_7
   \   000000E2   0x.... 0x....      BL       FRAM_ReadProductInfo
    292              //    FRAM_ReadCurRecord((stcFlshRec  *)&Ctrl.sRec);                 //读当前记录
    293              //    FRAM_ReadOilPara((StrOilPara  *)&Ctrl.SOilPara);               //读计算参数
    294              FRAM_ReadRunPara((stcRunPara  *)&Ctrl.sRunPara);               //读运行参数
   \   000000E6   0x....             LDR.N    R0,??DataTable1_5
   \   000000E8   0x.... 0x....      BL       FRAM_ReadRunPara
    295              //    FRAM_ReadCalcModel((stcCalcModel  *)&Ctrl.sCalcModel);         //读计算模型
    296              
    297          }
   \   000000EC   0xBD01             POP      {R0,PC}          ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   0x........         DC32     TaskTmrEvtProcess

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_1:
   \   00000000   0x........         DC32     TaskInitTmr

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_2:
   \   00000000   0x........         DC32     TaskLedEvtProcess

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_3:
   \   00000000   0x........         DC32     TaskInitLed

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_4:
   \   00000000   0x........         DC32     Ctrl

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_5:
   \   00000000   0x........         DC32     Ctrl+0xAC

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_6:
   \   00000000   0x........         DC32     Ctrl+0x4

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_7:
   \   00000000   0x........         DC32     Ctrl+0x14
    298          /*******************************************************************************
    299           *              end of file                                                    *
    300           *******************************************************************************/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   App_InitEndHook
       0   App_InitStartHook
       0   App_Main
       8   OSAL_TaskCreateHook
         8   -> osal_add_Task
       8   OS_TaskCreateHook
         8   -> App_TaskCardCreate
         8   -> App_TaskCommCreate
       8   app_init_sctrl
         8   -> BSP_FlashOsInit
         8   -> BSP_FramOsInit
         8   -> BSP_WDT_Rst
         8   -> FRAM_ReadProductInfo
         8   -> FRAM_ReadRecNumMgr
         8   -> FRAM_ReadRunPara
         8   -> FRAM_StoreRunPara
         8   -> GPIO_Fram_Init
         8   -> InitFlashIO


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
       4  ??DataTable1_1
       4  ??DataTable1_2
       4  ??DataTable1_3
       4  ??DataTable1_4
       4  ??DataTable1_5
       4  ??DataTable1_6
       4  ??DataTable1_7
       2  App_InitEndHook
       2  App_InitStartHook
       2  App_Main
     764  Ctrl
      28  OSAL_TaskCreateHook
      12  OS_TaskCreateHook
      40  WdtFlagGRP
       4  WdtFlags
     238  app_init_sctrl

 
 808 bytes in section .bss
 316 bytes in section .text
 
 316 bytes of CODE memory
 808 bytes of DATA memory

Errors: none
Warnings: 2
